
# Reference: https://github.com/yasio/yasio/blob/main/.lgtm.yml

extraction: 
  # Define settings for C/C++ analysis
  #####################################
  cpp:
    configure:
      command:
        - NOCONFIGURE=1 ./autogen.sh
        - ./configure --prefix=/usr --with-product-name="pw3270"
    prepare:
      packages: 
        - gettext
        - git
        - make
        - autotools-dev
        - autoconf
        - automake
        - pkg-config
        - gettext
        - libssl-dev
        - libcurl4-openssl-dev
        - libgtk-3-dev
        - imagemagick

    # Add an `after-prepare` step if you need to run commands after the prepare step.
    # Each command should be listed on a separate line.
    # This step is useful for C/C++ analysis where you want to prepare the environment
    # for the `configure` step without changing the default behavior for that step. 
    after_prepare:
      - export PRE_REQS_DIR=$(readlink -f .)/pre-reqs
      - git clone https://github.com/PerryWerneck/lib3270.git ./lib3270
      - cd lib3270
      - ./autogen.sh 
      - ./configure --prefix=/usr
      - make
      - make DESTDIR=${PRE_REQS_DIR} install
      - cd ..
      - export LIB3270_CFLAGS="-DLIB3270_NAME=3270 -DLIB3270_REVISION=00000000 -I${PRE_REQS_DIR}/usr/include"
      - export LIB3270_LIBS="-L${PRE_REQS_DIR}/usr/lib -l3270"

